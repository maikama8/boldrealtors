(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,o,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",c=r.toStringTag||"@@toStringTag";function a(t,r,i,c){var a=r&&r.prototype instanceof l?r:l,s=Object.create(a.prototype);return n(s,"_invoke",function(t,n,r){var i,c,a,l=0,s=r||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,c=0,a=e,d.n=n,u}};function p(t,n){for(c=t,a=n,o=0;!f&&l&&!r&&o<s.length;o++){var r,i=s[o],p=d.p,m=i[2];t>3?(r=m===n)&&(a=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=p&&((r=t<2&&p<i[1])?(c=0,d.v=n,d.n=i[1]):p<m&&(r=t<3||i[0]>n||n>m)&&(i[4]=t,i[5]=n,d.n=m,c=0))}if(r||t>1)return u;throw f=!0,n}return function(r,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,m),c=s,a=m;(o=c<2?e:a)||!f;){i||(c?c<3?(c>1&&(d.n=-1),p(c,a)):d.n=a:d.v=a);try{if(l=2,i){if(c||(r="next"),o=i[r]){if(!(o=o.call(i,a)))throw TypeError("iterator result is not an object");if(!o.done)return o;a=o.value,c<2&&(c=0)}else 1===c&&(o=i.return)&&o.call(i),c<2&&(a=TypeError("The iterator does not provide a '"+r+"' method"),c=1);i=e}else if((o=(f=d.n<0)?a:t.call(n,d))!==u)break}catch(t){i=e,c=1,a=t}finally{l=1}}return{value:o,done:f}}}(t,i,c),!0),s}var u={};function l(){}function s(){}function f(){}o=Object.getPrototypeOf;var d=[][i]?o(o([][i]())):(n(o={},i,function(){return this}),o),p=f.prototype=l.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,n(e,c,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=f,n(p,"constructor",f),n(f,"constructor",s),s.displayName="GeneratorFunction",n(f,c,"GeneratorFunction"),n(p),n(p,c,"Generator"),n(p,i,function(){return this}),n(p,"toString",function(){return"[object Generator]"}),(t=function(){return{w:a,m}})()}function n(e,t,o,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}n=function(e,t,o,r){function c(t,o){n(e,t,function(e){return this._invoke(t,o,e)})}t?i?i(e,t,{value:o,enumerable:!r,configurable:!r,writable:!r}):e[t]=o:(c("next",0),c("throw",1),c("return",2))},n(e,t,o,r)}function o(e,t,n,o,r,i,c){try{var a=e[i](c),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(o,r)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var c=e.apply(t,n);function a(e){o(c,r,i,a,u,"next",e)}function u(e){o(c,r,i,a,u,"throw",e)}a(void 0)})}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,l(o.key),o)}}function u(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}$(document).ready(function(){var e=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"$customFieldWrapper",$(".custom-fields-wrap")),u(this,"$customFieldList",$("#custom-field-list")),u(this,"options",window.customFields)},n=[{key:"init",value:function(){var e=this;this.options&&this.options.customFields&&(this.actions(),this.options.customFields.forEach(function(t){var n=e.$customFieldList.find(".row").length,o={id:t.id,name:t.name,value:t.value};t.custom_field_id&&"dropdown"===t.custom_field.type?e.generateDropdownTemplate(c(c({},o),{},{custom_field_id:t.custom_field_id,selectOptions:t.custom_field.options}),n,!0):e.generateTextTemplate(c(c({},o),{},{custom_field_id:t.custom_field_id}),n,!!t.custom_field_id)}))}},{key:"actions",value:function(){var e=this;this.$customFieldWrapper.on("click","#add-new",r(t().m(function n(){var o,r,i;return t().w(function(t){for(;;)switch(t.n){case 0:if(""!==(o=$("#custom-field-id").val())){t.n=1;break}e.generateTextTemplate({},e.$customFieldList.find(".row").length),t.n=3;break;case 1:return t.n=2,e.addFromGlobal(o);case 2:r=t.v.data,i=e.$customFieldList.find(".row").length,"dropdown"===r.type?e.generateDropdownTemplate({custom_field_id:r.id,name:r.name,selectOptions:r.options},i,!0):"text"===r.type&&e.generateTextTemplate({custom_field_id:r.id,name:r.name},i,!0);case 3:$("#add-custom-field-modal").modal("toggle");case 4:return t.a(2)}},n)}))).on("click",".remove-custom-field",function(){$(this).parent().parent().parent().remove()})}},{key:"addFromGlobal",value:(i=r(t().m(function e(n){return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fetch("".concat(this.options.ajax,"?id=").concat(n));case 1:return e.n=2,e.v.json();case 2:return e.a(2,e.v)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"generateTextTemplate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=$("#custom-field-template").html().replace(/__id__/g,e.id||"").replace(/__custom_field_id__/g,e.custom_field_id||"").replace(/__name__/g,e.name||"").replace(/__value__/g,e.value||"").replace(/__index__/g,t).replace(/__custom_field_input_class__/g,n?"form-control-disabled":"");this.$customFieldList.append(o),e.custom_field_id&&this.$customFieldList.find('[data-index="'.concat(t,'"] .custom-field-name')).prop("readonly",!0)}},{key:"generateDropdownTemplate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="";$.each(e.selectOptions,function(t,n){o+='<option value="'.concat(n.value,'" ').concat(e.value===n.value?"selected":"",">").concat(n.label,"</option>")});var r=$("#custom-field-dropdown-template").html().replace(/__id__/g,e.id||"").replace(/__custom_field_id__/g,e.custom_field_id||"").replace(/__name__/g,e.name||"").replace(/__index__/g,t).replace(/__selectOptions__/g,o).replace(/__custom_field_input_class__/g,n?"form-control-disabled":"");this.$customFieldList.append(r),e.custom_field_id&&this.$customFieldList.find('[data-index="'.concat(t,'"] .custom-field-name')).prop("readonly",!0)}}],n&&a(e.prototype,n),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,o,i}();(new e).init()})})();