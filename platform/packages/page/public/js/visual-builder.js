(()=>{var t={862:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function n(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach(function(e){o(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function o(e,n,o){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}var i={shortcodes:[],activeShortcode:null,hasChanges:!1,isSaving:!1,deviceMode:"desktop",listeners:{},init:function(t){this.shortcodes=t||[],this.activeShortcode=null,this.hasChanges=!1,this.isSaving=!1,this.deviceMode="desktop"},getShortcode:function(t){return this.shortcodes.find(function(e){return e.id===t})},getAllShortcodes:function(){return this.shortcodes},getActiveShortcode:function(){return this.activeShortcode?this.getShortcode(this.activeShortcode):null},updateShortcode:function(t,e){var o=this.shortcodes.findIndex(function(e){return e.id===t});-1!==o&&(this.shortcodes[o]=n(n({},this.shortcodes[o]),e),this.markChanged(),this.emit("shortcode-updated",this.shortcodes[o]))},addShortcode:function(t,e){var o=n({id:this.generateId()},t);return"number"==typeof e&&e>=0&&e<=this.shortcodes.length?this.shortcodes.splice(e,0,o):this.shortcodes.push(o),this.markChanged(),this.emit("shortcode-added",o),o},deleteShortcode:function(t){var e=this.shortcodes.findIndex(function(e){return e.id===t});if(-1!==e){var n=this.shortcodes.splice(e,1)[0];return this.markChanged(),this.emit("shortcode-deleted",n),!0}return!1},reorderShortcodes:function(t){this.shortcodes=t,this.markChanged(),this.emit("shortcodes-reordered",t)},setActive:function(t){this.activeShortcode=t,this.emit("active-changed",t)},clearActive:function(){this.activeShortcode=null,this.emit("active-changed",null)},markChanged:function(){this.hasChanges||(this.hasChanges=!0,this.emit("has-changes",!0))},clearChanges:function(){this.hasChanges=!1,this.emit("has-changes",!1)},setDeviceMode:function(t){this.deviceMode=t,this.emit("device-mode-changed",t)},setSaving:function(t){this.isSaving=t,this.emit("saving-changed",t)},generateId:function(){return"sc_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)},on:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},off:function(t,e){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter(function(t){return t!==e}))},emit:function(t,e){this.listeners[t]&&this.listeners[t].forEach(function(t){return t(e)})}};window.VisualBuilderState=i},1676:()=>{var t={$iframe:null,$container:null,$loading:null,$error:null,$preview:null,iframe:null,isReady:!1,deviceMode:"desktop",init:function(){var t=this;this.$iframe=$("#vb-preview-iframe"),this.$container=$("#vb-preview-frame-container"),this.$loading=$("#vb-preview-loading"),this.$error=$("#vb-preview-error"),this.$preview=$("#vb-preview"),this.iframe=this.$iframe[0],this.$iframe.on("load",function(){t.handleLoad()}),this.$iframe.on("error",function(){t.showError("Failed to load preview")}),"undefined"!=typeof PostMessageUtil&&PostMessageUtil.listenToIframe(function(e,n){t.handleMessage(e,n)}),this.setDeviceMode("desktop")},handleLoad:function(){var t=this;this.isReady=!0,this.hideLoading(),this.$preview.addClass("loaded"),setTimeout(function(){t.injectEditIcons()},500)},handleMessage:function(t,e){switch(t){case"ready":this.handleLoad();break;case"edit-shortcode":e&&e.id&&this.handleEditRequest(e.id);break;case"delete-shortcode":e&&e.id&&this.handleDeleteRequest(e.id)}},handleEditRequest:function(t){"undefined"!=typeof ShortcodeList&&ShortcodeList.openEditPanel(t)},handleDeleteRequest:function(t){"undefined"!=typeof ShortcodeList&&ShortcodeList.deleteShortcode(t)},injectEditIcons:function(){if(this.iframe&&this.iframe.contentDocument)try{var t=this.iframe.contentDocument||this.iframe.contentWindow.document;"undefined"!=typeof EditIconInjector&&EditIconInjector.inject(t),this.injectEditIconStyles(t)}catch(t){}},injectEditIconStyles:function(t){if(!t.getElementById("vb-edit-icon-styles")){var e=t.createElement("style");e.id="vb-edit-icon-styles",e.textContent="\n            /* Shortcode block wrapper */\n            .vb-shortcode-block {\n                position: relative !important;\n                min-height: 20px;\n                transition: all 0.2s ease;\n            }\n\n            /* Toolbar */\n            .vb-shortcode-toolbar {\n                position: absolute;\n                top: 10px;\n                right: 10px;\n                z-index: 9999;\n                display: flex;\n                gap: 4px;\n                opacity: 0;\n                transition: all 0.2s ease;\n                pointer-events: none;\n            }\n\n            /* Show toolbar on hover or when active */\n            .vb-shortcode-block:hover .vb-shortcode-toolbar,\n            .vb-shortcode-block.vb-active .vb-shortcode-toolbar {\n                opacity: 1;\n                pointer-events: all;\n            }\n\n            /* Toolbar buttons */\n            .vb-toolbar-btn {\n                width: 32px;\n                height: 32px;\n                border: none;\n                border-radius: 6px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                cursor: pointer;\n                transition: all 0.2s ease;\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n                font-size: 16px;\n            }\n\n            .vb-toolbar-btn i {\n                color: #fff;\n                font-size: 16px;\n                line-height: 1;\n            }\n\n            /* Edit button */\n            .vb-toolbar-btn.vb-edit-btn {\n                background: #206bc4;\n            }\n\n            .vb-toolbar-btn.vb-edit-btn:hover {\n                background: #1a5ba7;\n                transform: scale(1.05);\n                box-shadow: 0 4px 12px rgba(32, 107, 196, 0.3);\n            }\n\n            /* Delete button */\n            .vb-toolbar-btn.vb-delete-btn {\n                background: #d63939;\n            }\n\n            .vb-toolbar-btn.vb-delete-btn:hover {\n                background: #c72e2e;\n                transform: scale(1.05);\n                box-shadow: 0 4px 12px rgba(214, 57, 57, 0.3);\n            }\n\n            /* Hover effect on shortcode block */\n            .vb-shortcode-block:hover {\n                outline: 2px dashed #206bc4;\n                outline-offset: 2px;\n            }\n\n            /* Active/selected state */\n            .vb-shortcode-block.vb-active {\n                outline: 2px solid #206bc4 !important;\n                outline-offset: 2px;\n                background: rgba(32, 107, 196, 0.05);\n            }\n\n            /* Prevent toolbar from affecting layout */\n            .vb-shortcode-toolbar * {\n                box-sizing: border-box;\n            }\n        ",t.head.appendChild(e)}},reload:function(){this.isReady=!1,this.showLoading(),this.$preview.removeClass("loaded error");var t=VisualBuilderState.getAllShortcodes(),e=window.visualBuilderData||{},n=e.previewUrl+(e.previewUrl.includes("?")?"&":"?")+"visual_builder=1",o=$("<form>",{method:"POST",action:n,target:"vb-preview-iframe",style:"display: none;"});o.append($("<input>",{type:"hidden",name:"_token",value:e.csrfToken})),o.append($("<input>",{type:"hidden",name:"shortcodes",value:JSON.stringify(t)})),o.appendTo("body").submit().remove()},setDeviceMode:function(t){this.deviceMode=t,this.$container.removeClass("device-desktop device-tablet device-mobile"),this.$container.addClass("device-"+t)},highlightShortcode:function(t){if(this.iframe&&this.iframe.contentDocument)try{var e=this.iframe.contentDocument||this.iframe.contentWindow.document;"undefined"!=typeof EditIconInjector&&EditIconInjector.highlight(e,t)}catch(t){}},unhighlightShortcode:function(){if(this.iframe&&this.iframe.contentDocument)try{var t=this.iframe.contentDocument||this.iframe.contentWindow.document;"undefined"!=typeof EditIconInjector&&EditIconInjector.unhighlight(t)}catch(t){}},updateShortcode:function(t,e){this.reload()},showLoading:function(){this.$loading.show(),this.$error.hide(),this.$container.hide()},hideLoading:function(){this.$loading.hide(),this.$container.show()},showError:function(t){this.isReady=!1,this.$loading.hide(),this.$container.hide(),this.$error.show(),this.$preview.addClass("error"),t&&$("#vb-error-message").text(t)}};window.PreviewIframe=t},1696:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function n(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach(function(e){o(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function o(e,n,o){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}var i={$listModal:null,$formModal:null,listModalInstance:null,formModalInstance:null,selectedShortcode:null,init:function(){this.$listModal=$("#vb-shortcode-list-modal"),this.$formModal=$("#vb-shortcode-modal"),"undefined"!=typeof bootstrap&&bootstrap.Modal&&(this.listModalInstance=new bootstrap.Modal(this.$listModal[0]),this.formModalInstance=new bootstrap.Modal(this.$formModal[0])),this.attachEvents()},attachEvents:function(){var t=this;$(document).on("change",'[data-bb-toggle="shortcode-item-radio"]',function(){$('[data-bb-toggle="vb-shortcode-use"]').prop("disabled",!1).removeClass("disabled")}),$(document).on("dblclick",'[data-bb-toggle="vb-shortcode-select"]',function(e){var n=$(e.currentTarget);t.triggerShortcode(n)}),$('[data-bb-toggle="vb-shortcode-use"]').on("click",function(){var e=t.$listModal.find(".shortcode-item-input:checked").closest(".shortcode-item-wrapper");t.triggerShortcode(e),$('[data-bb-toggle="shortcode-item-radio"]').prop("checked",!1),$('[data-bb-toggle="vb-shortcode-use"]').prop("disabled",!0).addClass("disabled")}),$(document).on("click",'[data-bb-toggle="vb-shortcode-button-use"]',function(e){e.stopPropagation();var n=$(e.currentTarget).closest(".shortcode-item-wrapper");t.triggerShortcode(n)}),$('[data-bb-toggle="vb-shortcode-add-single"]').on("click",function(e){e.preventDefault(),t.insertShortcode()}),this.$formModal.on("show.bs.modal",function(){t.listModalInstance&&t.listModalInstance.hide(),$('[data-bb-toggle="shortcode-item-radio"]').prop("checked",!1),$('[data-bb-toggle="vb-shortcode-use"]').prop("disabled",!0).addClass("disabled")}),$('[data-bb-toggle="shortcode-clear-search"]').on("click",function(){t.$listModal.find('input[name="search"]').val(""),t.filterShortcodes("")}),t.$listModal.find('input[name="search"]').on("input",function(){t.filterShortcodes($(this).val())})},show:function(){this.listModalInstance?this.listModalInstance.show():this.$listModal.modal("show")},triggerShortcode:function(t){this.loadShortcodeConfig({href:t.data("url"),key:t.data("key"),name:t.data("name"),description:t.data("description")})},loadShortcodeConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.href,o=t.key,i=t.name,r=t.description,a=void 0===r?null:r,s=t.data,d=void 0===s?{}:s,c=t.update,l=void 0!==c&&c;this.selectedShortcode={key:o,name:i,description:a},$(".shortcode-admin-config").html("");var h=$('.shortcode-modal button[data-bb-toggle="vb-shortcode-add-single"]');h.text(h.data(l?"update-text":"add-text")),$(".shortcode-modal .modal-title").text(i),this.formModalInstance?this.formModalInstance.show():this.$formModal.modal("show");var u=this.$formModal.find(".modal-content");"undefined"!=typeof Botble&&Botble.showLoading&&Botble.showLoading(u),$.ajax({url:e,method:"POST",data:n({_token:(window.visualBuilderData||{}).csrfToken},d),success:function(t){$(".shortcode-data-form").trigger("reset"),$(".shortcode-input-key").val(o),$(".shortcode-admin-config").html(t.data),"undefined"!=typeof Botble&&(Botble.hideLoading(u),Botble.initResources(),Botble.initMediaIntegrate(),Botble.initFieldCollapse())},error:function(){"undefined"!=typeof Botble&&(Botble.hideLoading(u),Botble.showError("Failed to load shortcode configuration"))}})},insertShortcode:function(){if(this.selectedShortcode){var t=$(".shortcode-modal").find(".shortcode-data-form"),e=t.serializeObject(),n={},o="";$.each(e,function(e,i){"content"===t.find('*[name="'+e+'"]').data("shortcode-attribute")?o=i:i&&(e=e.replace("[]",""),n[e]=i)});var i={name:this.selectedShortcode.key,attributes:n,content:o||"",isSelfClosing:!o};VisualBuilderState.addShortcode(i),"undefined"!=typeof PreviewIframe&&PreviewIframe.reload(),this.formModalInstance?this.formModalInstance.hide():this.$formModal.modal("hide")}},filterShortcodes:function(t){var e=t.toLowerCase(),n=this.$listModal.find(".shortcode-item-wrapper"),o=0;n.each(function(){var t=$(this),n=t.data("name").toLowerCase(),i=(t.data("description")||"").toLowerCase();n.includes(e)||i.includes(e)?(t.closest(".col-xl-3").show(),o++):t.closest(".col-xl-3").hide()}),0===o?(this.$listModal.find(".shortcode-empty").show(),this.$listModal.find(".shortcode-list").hide()):(this.$listModal.find(".shortcode-empty").hide(),this.$listModal.find(".shortcode-list").show())}};$.fn.serializeObject=function(){var t={},e=this.serializeArray();return $.each(e,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},window.AddShortcodeModal=i},5053:()=>{function t(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,r,a,s=[],d=!0,c=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;d=!1}else for(;!(d=(o=r.call(n)).done)&&(s.push(o.value),s.length!==e);d=!0);}catch(t){c=!0,i=t}finally{try{if(!d&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var i={$container:null,sortableInstance:null,init:function(){var t=this;this.$container=$("#vb-shortcode-list"),this.render(),this.attachEvents(),this.initDragDrop(),VisualBuilderState.on("shortcode-added",function(){return t.render()}),VisualBuilderState.on("shortcode-deleted",function(){return t.render()}),VisualBuilderState.on("shortcode-updated",function(){return t.render()}),VisualBuilderState.on("shortcodes-reordered",function(){return t.render()}),VisualBuilderState.on("active-changed",function(e){return t.updateActiveState(e)})},render:function(){var t=this,e=VisualBuilderState.getAllShortcodes(),n=VisualBuilderState.getActiveShortcode(),o=n?n.id:null;if(0!==e.length){var i=window.visualBuilderData||{};$.ajax({url:i.renderItemsUrl,method:"POST",data:{_token:i.csrfToken,shortcodes:e,activeId:o},success:function(e){e.data&&e.data.html&&(t.$container.html(e.data.html),t.initDragDrop())}})}else this.$container.html('\n                <div class="text-center text-muted py-4">\n                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-lg" width="48" height="48" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.3;">\n                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                        <path d="M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v10a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z"></path>\n                        <path d="M10 16h-3a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v2"></path>\n                    </svg>\n                    <p>No shortcodes yet. Click "Add Shortcode" to get started.</p>\n                </div>\n            ')},renderItem:function(t,n){var o=VisualBuilderState.activeShortcode===t.id?"active":"",i="";t.attributes?i=Object.entries(t.attributes).slice(0,2).map(function(t){var n=e(t,2),o=n[0],i=n[1];return"".concat(o,": ").concat(i)}).join(", ")||t.name:i=t.name;return'\n            <div class="vb-shortcode-item '.concat(o,'" data-id="').concat(t.id,'">\n                <div class="vb-item-drag-handle">\n                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                        <path d="M9 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>\n                        <path d="M9 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>\n                        <path d="M9 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>\n                        <path d="M15 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>\n                        <path d="M15 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>\n                        <path d="M15 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>\n                    </svg>\n                </div>\n                <div class="vb-item-icon">\n                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                        <path d="M7 8l-4 4l4 4"></path>\n                        <path d="M17 8l4 4l-4 4"></path>\n                        <path d="M14 4l-4 16"></path>\n                    </svg>\n                </div>\n                <div class="vb-item-content">\n                    <h4 class="vb-item-name">').concat(this.escapeHtml(t.name),'</h4>\n                    <div class="vb-item-preview">').concat(this.escapeHtml(i),'</div>\n                </div>\n                <div class="vb-item-actions">\n                    <button type="button" class="btn btn-sm btn-ghost vb-delete-btn" data-id="').concat(t.id,'" title="Delete">\n                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                            <path d="M4 7l16 0"></path>\n                            <path d="M10 11l0 6"></path>\n                            <path d="M14 11l0 6"></path>\n                            <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path>\n                            <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path>\n                        </svg>\n                    </button>\n                </div>\n            </div>\n        ')},attachEvents:function(){var t=this;this.$container.on("click",".vb-delete-btn",function(e){e.preventDefault(),e.stopPropagation();var n=$(this).data("id");t.deleteShortcode(n)}),this.$container.on("click",".vb-shortcode-item",function(e){if(!$(e.target).hasClass("vb-delete-btn")&&!$(e.target).closest(".vb-delete-btn").length&&!$(e.target).closest(".vb-item-drag-handle").length){var n=$(this).data("id");t.openEditPanel(n)}}),this.$container.on("mouseenter",".vb-shortcode-item",function(t){var e=$(this).data("id");"undefined"!=typeof PreviewIframe&&PreviewIframe.isReady&&PreviewIframe.highlightShortcode(e)}),this.$container.on("mouseleave",".vb-shortcode-item",function(t){"undefined"!=typeof PreviewIframe&&PreviewIframe.isReady&&PreviewIframe.unhighlightShortcode()})},initDragDrop:function(){var t=this;this.sortableInstance&&this.sortableInstance.destroy(),"undefined"!=typeof Sortable&&this.$container[0]&&(this.sortableInstance=new Sortable(this.$container[0],{animation:150,handle:".vb-item-drag-handle",ghostClass:"sortable-ghost",dragClass:"sortable-drag",onEnd:function(e){t.handleReorder(e)}}))},handleReorder:function(e){var n=VisualBuilderState.getAllShortcodes(),o=n[e.oldIndex],i=t(n);i.splice(e.oldIndex,1),i.splice(e.newIndex,0,o),VisualBuilderState.reorderShortcodes(i),"undefined"!=typeof PreviewIframe&&PreviewIframe.reload()},openEditPanel:function(t){VisualBuilderState.setActive(t),$("#vb-edit-panel").removeClass("d-none").show(),"undefined"!=typeof ShortcodeEditPanel&&ShortcodeEditPanel.render(t),"undefined"!=typeof PreviewIframe&&PreviewIframe.highlightShortcode(t)},deleteShortcode:function(t){var e;if(t){var n=(null===(e=(window.visualBuilderData||{}).translations)||void 0===e?void 0:e.confirmDelete)||"Are you sure you want to delete this shortcode?";confirm(n)&&(VisualBuilderState.deleteShortcode(t),"undefined"!=typeof PreviewIframe&&PreviewIframe.reload())}},updateActiveState:function(t){this.$container.find(".vb-shortcode-item").removeClass("active"),t&&this.$container.find('.vb-shortcode-item[data-id="'.concat(t,'"]')).addClass("active")},escapeHtml:function(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML}};window.ShortcodeList=i},5358:()=>{var t={inject:function(t){var e=this;if(t){var n=t.querySelectorAll("[data-shortcode-id]");0!==n.length&&n.forEach(function(n){e.injectIcon(n,t)})}},injectIcon:function(t,e){var n=this,o=t.getAttribute("data-shortcode-id"),i=t.getAttribute("data-shortcode-name")||"shortcode";if(!t.querySelector(":scope > .vb-shortcode-toolbar")&&!t.classList.contains("vb-shortcode-toolbar")){"static"===window.getComputedStyle(t).position&&(t.style.position="relative"),t.classList.add("vb-shortcode-block");var r=e.createElement("div");r.className="vb-shortcode-toolbar",r.setAttribute("data-shortcode-id",o);var a=e.createElement("button");a.className="vb-toolbar-btn vb-edit-btn",a.setAttribute("title","Edit ".concat(i)),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" /><path d="M13.5 6.5l4 4" /></svg>',a.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),n.handleEditClick(o)});var s=e.createElement("button");s.className="vb-toolbar-btn vb-delete-btn",s.setAttribute("title","Delete ".concat(i)),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',s.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),n.handleDeleteClick(o)}),r.appendChild(a),r.appendChild(s),t.insertBefore(r,t.firstChild)}},handleEditClick:function(t){"undefined"!=typeof PostMessageUtil&&PostMessageUtil.sendToParent("edit-shortcode",{id:t})},handleDeleteClick:function(t){"undefined"!=typeof PostMessageUtil&&PostMessageUtil.sendToParent("delete-shortcode",{id:t})},removeAll:function(t){t&&t.querySelectorAll(".vb-shortcode-toolbar").forEach(function(t){return t.remove()})},highlight:function(t,e){if(t&&(t.querySelectorAll(".vb-active").forEach(function(t){return t.classList.remove("vb-active")}),e)){var n=t.querySelector('[data-shortcode-id="'.concat(e,'"]'));n&&(n.classList.add("vb-active"),n.scrollIntoView({behavior:"smooth",block:"center"}))}},unhighlight:function(t){t&&t.querySelectorAll(".vb-active").forEach(function(t){return t.classList.remove("vb-active")})}};window.EditIconInjector=t},6024:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function n(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach(function(e){o(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function o(e,n,o){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}var i={$container:null,$content:null,$title:null,currentShortcode:null,updateTimeout:null,currentRequest:null,init:function(){this.$container=$("#vb-edit-panel"),this.$content=$("#vb-panel-content"),this.$title=$("#vb-panel-title")},render:function(t){var e=VisualBuilderState.getShortcode(t);e&&(this.currentShortcode=e,this.$title.text("Edit: ".concat(e.name)),this.loadShortcodeForm(e))},loadShortcodeForm:function(t){var e=this;if(this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null),this.$content&&0!==this.$content.length||(this.$content=$("#vb-panel-content")),0!==this.$content.length){var o=window.visualBuilderData||{},i=(o.availableShortcodes||[]).find(function(e){return e.key===t.name});if(i&&i.url){var r=i.url;"undefined"!=typeof Botble&&Botble.showLoading&&Botble.showLoading(this.$content);var a={};t.attributes&&Object.assign(a,t.attributes),t.content&&(a.content=t.content),this.currentRequest=$.ajax({url:r,method:"POST",data:n({_token:o.csrfToken},a),timeout:3e4,success:function(t){e.currentRequest=null,"undefined"!=typeof Botble&&Botble.hideLoading(e.$content),e.$content&&0!==e.$content.length||(e.$content=$("#vb-panel-content")),t&&t.data?(e.$content.html('<form id="vb-edit-form">'+t.data+"</form>"),"undefined"!=typeof Botble&&(Botble.initResources(),Botble.initMediaIntegrate(),Botble.initFieldCollapse()),e.attachEvents()):e.$content.html('<p class="text-danger">Invalid response format.</p>')},error:function(t,n,o){if(e.currentRequest=null,"abort"!==n){"undefined"!=typeof Botble&&Botble.hideLoading(e.$content),e.$content&&0!==e.$content.length||(e.$content=$("#vb-panel-content"));var i="Failed to load shortcode form.";t.responseJSON&&t.responseJSON.message?i=t.responseJSON.message:t.responseText?i+=" "+t.status+": "+o:"timeout"===n&&(i="Request timeout. Please try again."),e.$content.html('<p class="text-danger">'+i+"</p>")}}})}else this.$content.html('<p class="text-danger">Shortcode configuration not found.</p>')}},attachEvents:function(){var t=this;this.$content.off("input change").on("input change","input, textarea, select",function(){clearTimeout(t.updateTimeout),t.updateTimeout=setTimeout(function(){t.handleFieldChange()},300)})},handleFieldChange:function(){if(this.currentShortcode){var t=this.getFormData();VisualBuilderState.updateShortcode(this.currentShortcode.id,{attributes:t.attributes,content:t.content}),"undefined"!=typeof PreviewIframe&&PreviewIframe.updateShortcode(this.currentShortcode.id,t)}},getFormData:function(){var t=$("#vb-edit-form"),e={},n="";return t.find("input, textarea, select").each(function(){var t=$(this),o=t.attr("name");if("content"===t.data("shortcode-attribute"))n=t.val();else if(o){var i;if(i="checkbox"===t.attr("type")?t.is(":checked")?"yes":"no":t.val()){var r=o.replace("[]","");e[r]=i}}}),{attributes:e,content:n}}};window.ShortcodeEditPanel=i},6620:()=>{var t={allowedOrigin:window.location.origin,sendToIframe:function(t,e,n){if(t&&t.contentWindow){var o={source:"visual-builder",type:e,payload:n||{}};try{t.contentWindow.postMessage(o,this.allowedOrigin)}catch(t){}}},listenToIframe:function(t){var e=this;window.addEventListener("message",function(n){n.origin===e.allowedOrigin&&n.data&&"visual-builder-preview"===n.data.source&&"function"==typeof t&&t(n.data.type,n.data.payload)})},sendToParent:function(t,e){if(window.parent!==window){var n={source:"visual-builder-preview",type:t,payload:e||{}};try{window.parent.postMessage(n,this.allowedOrigin)}catch(t){}}}};window.PostMessageUtil=t},6976:()=>{!function(t){"use strict";var e={config:{},modules:{},draftCheckPerformed:!1,init:function(){this.config=window.visualBuilderData||{},VisualBuilderState.init(this.config.shortcodes),this.initHeader(),this.initSidebar(),this.initPreview(),this.initAutoSave(),this.initUnsavedWarning()},initHeader:function(){var e=this;t("#vb-save-btn").on("click",function(){e.save()}),t("#vb-close-btn").on("click",function(t){if(VisualBuilderState.hasChanges){if(!confirm(e.config.translations.unsavedChanges))return t.preventDefault(),!1;VisualBuilderState.clearChanges()}}),t('#vb-device-modes input[type="radio"]').on("change",function(){if(this.checked){var e=t(this).data("device");VisualBuilderState.setDeviceMode(e)}}),VisualBuilderState.on("has-changes",function(e){e?t("#vb-unsaved-indicator").show():t("#vb-unsaved-indicator").hide()}),VisualBuilderState.on("saving-changed",function(n){var o=t("#vb-save-btn"),i='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>';n?(o.prop("disabled",!0),o.html('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-loader animate-spin"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 6l0 -3" /><path d="M16.25 7.75l2.15 -2.15" /><path d="M18 12l3 0" /><path d="M16.25 16.25l2.15 2.15" /><path d="M12 18l0 3" /><path d="M7.75 16.25l-2.15 2.15" /><path d="M6 12l-3 0" /><path d="M7.75 7.75l-2.15 -2.15" /></svg> <span class="d-none d-sm-inline">'+e.config.translations.saving+"</span>")):(o.prop("disabled",!1),o.html(i+' <span class="d-none d-sm-inline">'+e.config.translations.saved+"</span>"),setTimeout(function(){VisualBuilderState.isSaving||o.html(i+' <span class="d-none d-sm-inline">'+(e.config.translations.save||"Save")+"</span>")},2e3))})},initSidebar:function(){"undefined"!=typeof ShortcodeList&&ShortcodeList.init(),"undefined"!=typeof ShortcodeEditPanel&&ShortcodeEditPanel.init(),"undefined"!=typeof AddShortcodeModal&&AddShortcodeModal.init(),t("#vb-back-btn, #vb-close-panel-btn").on("click",function(){t("#vb-edit-panel").addClass("d-none").hide(),VisualBuilderState.clearActive()}),t("#vb-add-shortcode-btn").on("click",function(){"undefined"!=typeof AddShortcodeModal&&AddShortcodeModal.show()})},initPreview:function(){"undefined"!=typeof PreviewIframe&&PreviewIframe.init(),t("#vb-reload-preview-btn").on("click",function(){"undefined"!=typeof PreviewIframe&&PreviewIframe.reload()}),VisualBuilderState.on("device-mode-changed",function(t){"undefined"!=typeof PreviewIframe&&PreviewIframe.setDeviceMode(t)})},save:function(){var e=this;VisualBuilderState.setSaving(!0);var n="";"undefined"!=typeof ShortcodeSerializer&&(n=ShortcodeSerializer.serialize(VisualBuilderState.getAllShortcodes())),t.ajax({url:this.config.saveUrl,method:"POST",data:{_token:this.config.csrfToken,content:n},success:function(t){VisualBuilderState.setSaving(!1),VisualBuilderState.clearChanges(),localStorage.removeItem("vb_draft_"+e.config.pageId),"undefined"!=typeof Botble&&Botble.showSuccess?Botble.showSuccess(e.config.translations.saved):alert(e.config.translations.saved)},error:function(t){VisualBuilderState.setSaving(!1);var n=e.config.translations.error;t.responseJSON&&t.responseJSON.message&&(n=t.responseJSON.message),"undefined"!=typeof Botble&&Botble.showError?Botble.showError(n):alert(n)}})},initAutoSave:function(){var t=this,e=null;VisualBuilderState.on("has-changes",function(n){n&&!e?e=setInterval(function(){t.autoSave()},3e4):!n&&e&&(clearInterval(e),e=null)}),this.checkDraft()},autoSave:function(){var t={timestamp:Date.now(),shortcodes:VisualBuilderState.getAllShortcodes()};try{localStorage.setItem("vb_draft_"+this.config.pageId,JSON.stringify(t))}catch(t){}},checkDraft:function(){if(!this.draftCheckPerformed){this.draftCheckPerformed=!0;var t="vb_draft_"+this.config.pageId,e=localStorage.getItem(t);if(e)try{var n=JSON.parse(e),o=new Date(n.timestamp);confirm("Restore unsaved changes from "+o.toLocaleString()+"?")?(VisualBuilderState.init(n.shortcodes),VisualBuilderState.markChanged(),"undefined"!=typeof ShortcodeList&&ShortcodeList.render(),"undefined"!=typeof PreviewIframe&&PreviewIframe.reload()):localStorage.removeItem(t)}catch(e){localStorage.removeItem(t)}}},initUnsavedWarning:function(){window.addEventListener("beforeunload",function(t){if(VisualBuilderState.hasChanges)return t.preventDefault(),t.returnValue="",""})}};window.VisualBuilderApp=e}(jQuery)},8763:()=>{function t(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,r,a,s=[],d=!0,c=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;d=!1}else for(;!(d=(o=r.call(n)).done)&&(s.push(o.value),s.length!==e);d=!0);}catch(t){c=!0,i=t}finally{try{if(!d&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var r={serialize:function(t){var e=this;return Array.isArray(t)?t.map(function(t){return e.serializeOne(t)}).join("\n\n"):""},serializeOne:function(t){if(!t||!t.name)return"";var n="["+t.name;if(t.attributes&&"object"===i(t.attributes))for(var o=0,r=Object.entries(t.attributes);o<r.length;o++){var a=e(r[o],2),s=a[0],d=a[1];if(null!=d&&""!==d){var c=this.escapeAttribute(d);n+=" ".concat(s,'="').concat(c,'"')}}return n+="]",t.content&&(n+=t.content),n+="[/"+t.name+"]"},escapeAttribute:function(t){return"string"!=typeof t&&(t=String(t)),t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')},parse:function(e){var n=this;return t(e.matchAll(/\[(\w+)([^\]]*?)(?:\s*\/\]|\]([^]*?)\[\/\1\])/g)).map(function(t,e){var o=t[1],i=t[2]||"",r=t[3]||"",a=t[0].endsWith("/]");return{id:"sc_parsed_"+Date.now()+"_"+e,name:o,attributes:n.parseAttributes(i),content:r,isSelfClosing:a,position:e,raw:t[0]}})},parseAttributes:function(t){var e={};if(!t||!t.trim())return e;for(var n,o=/(\w+)\s*=\s*(?:"([^"]*)"|'([^']*)')/g;null!==(n=o.exec(t));){var i=n[1],r=n[2]||n[3]||"";e[i]=r}return e},validate:function(e){var n=[];(e.match(/\[/g)||[]).length!==(e.match(/\]/g)||[]).length&&n.push("Mismatched brackets");var o=t(e.matchAll(/\[(\w+)(?:[^\]]*?)(?:\s*\/\]|\]([^]*?)\[\/\1\])/g)),i=e.match(/\[\w+/g)||[];return 2*o.length<i.length&&n.push("Possible unclosed shortcodes"),{valid:0===n.length,errors:n}}};window.ShortcodeSerializer=r}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";n(6620),n(5358),n(8763),n(862),n(5053),n(6024),n(1696),n(1676),n(6976);$(document).ready(function(){window.visualBuilderData&&VisualBuilderApp.init()})})()})();